<!--
Masons place and organize Tiles
Controls Drag and Drop
Append Tiles to Masons to create Walls
-->

<script>
  var container = document.querySelector('#<%=divId%>');
  var <%=divId%>msnry = new Masonry( container, {
   columnWidth: 260,
  });
  <%=divId%>msnry.layout();



  function allowDrop(ev){
    ev.preventDefault();
  }

  function drag(ev){
    ev.dataTransfer.setData("Text",ev.target.id);
  }

  function drop(ev){
    ev.preventDefault();
    var data=ev.dataTransfer.getData("Text");
    console.log("sending "+data+" to "+ev.target.parentElement.id);

    if(ev.target.parentElement.id === 'trash-drop'){
      document.getElementById(data).remove();
      <%=divId%>msnry.layout();
    }

    // document.getElementById(data).remove();
  }

  // (function ($) {
  //       $.each(['show', 'hide'], function (i, ev) {
  //         var el = $.fn[ev];
  //         $.fn[ev] = function () {
  //           this.trigger(ev);
  //           return el.apply(this, arguments);
  //         };
  //       });
  //     })(jQuery);
  //
  //     $('#<%=divId%>').on('show', function() {
  //           msnry.layout();
  //     });

</script>