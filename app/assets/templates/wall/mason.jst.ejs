<!--
Masons place and organize Tiles
Controls Drag and Drop
Append Tiles to Masons to create Walls
-->


<script>
  var container = document.querySelector('.wall.<%=wallName%>');
  var <%=wallName%>msnry = new Masonry( container, {
   columnWidth: 360,
  });
  <%=wallName%>msnry.layout();

  //drag n drop functions
  function allowDrop(ev){
    ev.preventDefault();
  }

  function drag(ev){
    ev.dataTransfer.setData("Text",ev.target.id);
  }


  function drop(ev){
    ev.preventDefault();
    var data=ev.dataTransfer.getData("Text");
    console.log("sending "+data+" to "+ev.target.parentElement.id);


    if(ev.target.parentElement.id === 'trash-drop'){
      document.getElementById(data).remove();
      <%=wallName%>msnry.layout();
      console.log(<%=wallName%>)
    }
  }
</script>







<!-- infinite scroll -->
<% $(window).scroll(function() { %>
  <% if (!view.loading && $(window).scrollTop() >= ( $(document).height() - $(window).height()*1.4)){ %>
    <% view.loading = true;%>
    <% view.loadMore(); %>
  <% } %>
<% }) %>